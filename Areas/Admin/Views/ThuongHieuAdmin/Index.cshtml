@model IEnumerable<TechStore.Models.ThuongHieu>
@{
    ViewData["Title"] = "Quản lý thương hiệu";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="page-header">
    <h1><i class="bi bi-award me-2"></i>Quản lý thương hiệu</h1>
    <a href="/Admin/ThuongHieu/Create" class="btn btn-primary btn-sm shadow-sm"><i class="bi bi-plus-lg"></i> Thêm mới</a>
</div>

<div class="card border-0 shadow-sm">
    <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
            <thead class="bg-light">
                <tr>
                    <th class="ps-4">ID</th>
                    <th>Logo</th>
                    <th>Tên thương hiệu</th>
                    <th>Quốc gia</th>
                    <th>Sản phẩm</th>
                    <th class="text-end pe-4">Hành động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="ps-4">#@item.MaTh</td>
                        <td>
                            @if(!string.IsNullOrEmpty(item.Logo)) {
                                <img src="~/Hinh/ThuongHieu/@item.Logo" style="height: 30px;" onerror="this.src='https://placehold.co/30x30'">
                            }
                        </td>
                        <td class="fw-bold">@item.TenTh</td>
                        <td>@item.QuocGia</td>
                        <td><span class="badge bg-secondary">@(item.HangHoas?.Count ?? 0)</span></td>
                        <td class="text-end pe-4">
                            <a href="/Admin/ThuongHieu/Edit/@item.MaTh" class="btn btn-sm btn-warning"><i class="bi bi-pencil"></i></a>
                            <button class="btn btn-sm btn-danger" onclick="deleteBrand(@item.MaTh)"><i class="bi bi-trash"></i></button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script>
        function deleteBrand(id) {
            if(confirm('Xóa thương hiệu này?')) {
                $.post('/Admin/ThuongHieu/Delete/' + id, function(res){
                    if(res.success) location.reload();
                    else alert(res.message);
                });
            }
        }
    </script>
}